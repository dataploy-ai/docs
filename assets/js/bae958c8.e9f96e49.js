"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8171],{3905:function(e,t,r){r.d(t,{Zo:function(){return l},kt:function(){return p}});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var u=n.createContext({}),c=function(e){var t=n.useContext(u),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},l=function(e){var t=c(e.components);return n.createElement(u.Provider,{value:t},e.children)},f={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},g=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,u=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),g=c(r),p=a,d=g["".concat(u,".").concat(p)]||g[p]||f[p]||o;return r?n.createElement(d,i(i({ref:t},l),{},{components:r})):n.createElement(d,i({ref:t},l))}));function p(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,i=new Array(o);i[0]=g;var s={};for(var u in t)hasOwnProperty.call(t,u)&&(s[u]=t[u]);s.originalType=e,s.mdxType="string"==typeof e?e:a,i[1]=s;for(var c=2;c<o;c++)i[c]=r[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}g.displayName="MDXCreateElement"},3144:function(e,t,r){r.r(t),r.d(t,{assets:function(){return l},contentTitle:function(){return u},default:function(){return p},frontMatter:function(){return s},metadata:function(){return c},toc:function(){return f}});var n=r(7462),a=r(3366),o=(r(7294),r(3905)),i=["components"],s={},u="Aggregations",c={unversionedId:"reference/how-does-natun-work/features/aggregations",id:"reference/how-does-natun-work/features/aggregations",title:"Aggregations",description:"Often the Feature we want to calculate is an aggregate of multiple events, for example - the sum number of visits to a product page, the average time per slide, or the variance of the length of interactions with the user.",source:"@site/docs/reference/how-does-natun-work/features/aggregations.md",sourceDirName:"reference/how-does-natun-work/features",slug:"/reference/how-does-natun-work/features/aggregations",permalink:"/docs/reference/how-does-natun-work/features/aggregations",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/reference/how-does-natun-work/features/aggregations.md",tags:[],version:"current",frontMatter:{},sidebar:"reference",previous:{title:"Features",permalink:"/docs/reference/how-does-natun-work/features/"},next:{title:"Feature Definitions",permalink:"/docs/reference/how-does-natun-work/features/feature-definitions"}},l={},f=[],g={toc:f};function p(e){var t=e.components,s=(0,a.Z)(e,i);return(0,o.kt)("wrapper",(0,n.Z)({},g,s,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"aggregations"},"Aggregations"),(0,o.kt)("p",null,"Often the Feature we want to calculate is an aggregate of multiple events, for example - the sum number of visits to a product page, the average time per slide, or the variance of the length of interactions with the user."),(0,o.kt)("p",null,"Calculating aggregations in real-time in production requires careful balancing between resources - storage (state), computation, and connections. Natun walks this balance ensuring that operational systems are not overloaded with queries, that data is fresh and precise (to reduce drift), and storage is reasonable."),(0,o.kt)("p",null,"When creating a ",(0,o.kt)("a",{parentName:"p",href:"./"},"Feature Definition"),", you can select the aggregation type and the time length of the bucket to aggregate on. Future versions might also offer buckets capped with a number of items or spanning user sessions. "),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Natun intenal aggregation algorithm",src:r(7719).Z,width:"490",height:"178"})),(0,o.kt)("p",null,"Internally, Natun applies a sliding window and incrementally caches the incoming results to calculate aggregations."))}p.isMDXComponent=!0},7719:function(e,t,r){t.Z=r.p+"assets/images/counters.drawio-d5ba5d3533405a97c953f109407ad961.png"}}]);