<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-getting-started-with-labsdk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.20">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Natun Docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Natun Docs Atom Feed"><title data-rh="true">Getting started with Natun LabSDK | Natun Docs</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.natun.ai/docs/getting-started-with-labsdk"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Getting started with Natun LabSDK | Natun Docs"><meta data-rh="true" name="description" content="We recommend starting with Natun using the LabSDK, which helping to create and to build production-grade features while developing your model."><meta data-rh="true" property="og:description" content="We recommend starting with Natun using the LabSDK, which helping to create and to build production-grade features while developing your model."><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://docs.natun.ai/docs/getting-started-with-labsdk"><link data-rh="true" rel="alternate" href="https://docs.natun.ai/docs/getting-started-with-labsdk" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.natun.ai/docs/getting-started-with-labsdk" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.99a92953.css">
<link rel="preload" href="/assets/js/runtime~main.77aaa479.js" as="script">
<link rel="preload" href="/assets/js/main.860a9f59.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Natun Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo.png" alt="Natun Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div></a><a class="navbar__item navbar__link navbar__link--active" href="/docs">Docs</a><a class="navbar__item navbar__link" href="/docs/reference/spec">Reference</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/natun-ai/natun" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_dLyj"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_mKqt"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><div class="docPage_ualW"><aside class="theme-doc-sidebar-container docSidebarContainer_UQUJ"><div class="sidebar_RiAD"><nav class="menu thin-scrollbar menu_izAj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/reference/spec">Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item red"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/docs/category/welcome">Welcome</a><button aria-label="Toggle the collapsible sidebar category &#x27;Welcome&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/welcome/demo-features">Demo features</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/welcome/hello-world-feature">Hello World feature</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/welcome/the-mock-website">The mock website</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/getting-started-with-labsdk">Getting started with Natun LabSDK</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs">Getting Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/tutorial-building-your-first-feature">Tutorial: Building Your First Feature</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/troubleshooting-features">Troubleshooting features</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/contact-the-support-team">Contact the support team</a></li></ul></nav></div></aside><main class="docMainContainer_uL0j"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_kU5B"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Getting started with Natun LabSDK</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_bZGK theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_l22C">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Getting started with Natun LabSDK</h1><a href="https://colab.research.google.com/github/natun-ai/docs/blob/master/docs/getting-started-with-labsdk.ipynb" target="_parent" rel="noopener noreferrer"><img loading="lazy" src="https://colab.research.google.com/assets/colab-badge.svg" alt="Open In Colab" class="img_E7b_"></a><p>We recommend starting with Natun using the LabSDK, which helping to create and to build production-grade features while developing your model.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="intalling-the-sdk">Intalling the SDK<a class="hash-link" href="#intalling-the-sdk" title="Direct link to heading">​</a></h2><p>Yalla, let&#x27;s go! The next two blocks install the LabSDK and imports it.</p><div class="language-python codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-python codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">!pip install </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">upgrade natun</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">labsdk</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-text codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">Looking in indexes: https://pypi.org/simple, https://us-python.pkg.dev/colab-wheels/public/simple/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Requirement already satisfied: natun-labsdk in /usr/local/lib/python3.7/dist-packages (0.0.2a2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Requirement already satisfied: pandas in /usr/local/lib/python3.7/dist-packages (from natun-labsdk) (1.3.5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Requirement already satisfied: python-dateutil&gt;=2.7.3 in /usr/local/lib/python3.7/dist-packages (from pandas-&gt;natun-labsdk) (2.8.2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Requirement already satisfied: numpy&gt;=1.17.3 in /usr/local/lib/python3.7/dist-packages (from pandas-&gt;natun-labsdk) (1.21.6)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Requirement already satisfied: pytz&gt;=2017.3 in /usr/local/lib/python3.7/dist-packages (from pandas-&gt;natun-labsdk) (2022.1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Requirement already satisfied: six&gt;=1.5 in /usr/local/lib/python3.7/dist-packages (from python-dateutil&gt;=2.7.3-&gt;pandas-&gt;natun-labsdk) (1.15.0)</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-python codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-python codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> natun</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> natun</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stub </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">#&lt;-- this is prevent the IDE/Notebookfrom detecting PyExp built-in as errors</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="writing-our-first-features">Writing our first features<a class="hash-link" href="#writing-our-first-features" title="Direct link to heading">​</a></h2><p>Our first feature is calculating how many emails an account got over the last 10 hours using the <code>streaming</code> builder.</p><p>It uses the <code>clickstream</code> data-connector the DevOps configured for us.</p><div class="language-python codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-python codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token decorator annotation punctuation" style="color:#393A34">@natun</span><span class="token decorator annotation punctuation" style="color:#393A34">.</span><span class="token decorator annotation punctuation" style="color:#393A34">register</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> freshness</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;1m&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> staleness</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;10h&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> options</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#393A34">@natun</span><span class="token decorator annotation punctuation" style="color:#393A34">.</span><span class="token decorator annotation punctuation" style="color:#393A34">connector</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;emails&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">#&lt;-- wher&#x27;e decorating our feature with our production data-connector! 😎 </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#393A34">@natun</span><span class="token decorator annotation punctuation" style="color:#393A34">.</span><span class="token decorator annotation punctuation" style="color:#393A34">builder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;streaming&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#393A34">@natun</span><span class="token decorator annotation punctuation" style="color:#393A34">.</span><span class="token decorator annotation punctuation" style="color:#393A34">aggr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">natun</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AggrFn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Count</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">emails_10h</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">**</span><span class="token plain">req</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;email over 10 hours&quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> req</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;timestamp&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> req</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;payload&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;account_id&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><blockquote><h2 class="anchor anchorWithStickyNavbar_mojV" id="️-notice">⚠️ <em>Notice</em><a class="hash-link" href="#️-notice" title="Direct link to heading">​</a></h2><p>Although it&#x27;s very tempting to use regular python features(such as imports and packages), it&#x27;s actually <strong>not a regular python</strong></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="the-feature-definition-above-is-actually-written-in-pyexp-and-will-be-executed-in-a-production-ready-sandboxed-runtime">The feature definition above is actually written in <a href="https://docs.natun.ai/docs/reference/pyexp" target="_blank" rel="noopener noreferrer">PyExp</a>, and will be executed in a production-ready sandboxed runtime.<a class="hash-link" href="#the-feature-definition-above-is-actually-written-in-pyexp-and-will-be-executed-in-a-production-ready-sandboxed-runtime" title="Direct link to heading">​</a></h2></blockquote><p>Let&#x27;s create another feature that calculating various of aggregations against the deal amount.</p><p>We&#x27;re also using here the <code>streaming</code> builder against the <code>deals</code> data-connector that DevOps configured for us:</p><div class="language-python codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-python codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token decorator annotation punctuation" style="color:#393A34">@natun</span><span class="token decorator annotation punctuation" style="color:#393A34">.</span><span class="token decorator annotation punctuation" style="color:#393A34">register</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> freshness</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;1m&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> staleness</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;10h&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> options</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#393A34">@natun</span><span class="token decorator annotation punctuation" style="color:#393A34">.</span><span class="token decorator annotation punctuation" style="color:#393A34">connector</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;deals&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#393A34">@natun</span><span class="token decorator annotation punctuation" style="color:#393A34">.</span><span class="token decorator annotation punctuation" style="color:#393A34">builder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;streaming&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#393A34">@natun</span><span class="token decorator annotation punctuation" style="color:#393A34">.</span><span class="token decorator annotation punctuation" style="color:#393A34">aggr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">natun</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AggrFn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Sum</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> natun</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AggrFn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Avg</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> natun</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AggrFn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Max</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> natun</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AggrFn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Min</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">deals_10h</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">**</span><span class="token plain">req</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;sum/avg/min/max of deal amount over 10 hours&quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> req</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;payload&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;amount&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> req</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;timestamp&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> req</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;payload&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;account_id&quot;</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now let&#x27;s create another feature that defines the rate between these two features.</p><p>Notice that we used the <strong>F</strong>ully <strong>Q</strong>ualified <strong>N</strong>ame(<em>FQN</em>) of the feature which also include&#x27;s the feature&#x27;s namespace(<em>default</em>).
When quering a feature with an aggreagtion function, we need to specify the function in the brackets.</p><div class="language-python codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-python codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token decorator annotation punctuation" style="color:#393A34">@natun</span><span class="token decorator annotation punctuation" style="color:#393A34">.</span><span class="token decorator annotation punctuation" style="color:#393A34">register</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;headless&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> freshness</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;-1&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> staleness</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;-1&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> options</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">emails_deals</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">**</span><span class="token plain">req</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;emails/deal[avg] rate over 10 hours&quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    e</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> _ </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;emails_10h.default[count]&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> req</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;entity_id&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    d</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> _ </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;deals_10h.default[avg]&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> req</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;entity_id&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> e </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">or</span><span class="token plain"> d </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> e </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> d</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Let&#x27;s prepare it as a data set:</p><div class="language-python codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-python codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token decorator annotation punctuation" style="color:#393A34">@natun</span><span class="token decorator annotation punctuation" style="color:#393A34">.</span><span class="token decorator annotation punctuation" style="color:#393A34">feature_set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">register</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">deal_prediction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;emails_10h.default[count]&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;deals_10h.default[sum]&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> emails_deals</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="historical-replay">Historical Replay<a class="hash-link" href="#historical-replay" title="Direct link to heading">​</a></h2><p>For development purposes, we can &quot;replay&quot; the historical records against our production-ready feature that we have written above.</p><p>The SDK will run this code locally, and will allow us to quickly iterate on it.</p><div class="language-python codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-python codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">!pip install pandas pyarrow</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-text codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">Looking in indexes: https://pypi.org/simple, https://us-python.pkg.dev/colab-wheels/public/simple/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Requirement already satisfied: pandas in /usr/local/lib/python3.7/dist-packages (1.3.5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Requirement already satisfied: pyarrow in /usr/local/lib/python3.7/dist-packages (6.0.1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Requirement already satisfied: python-dateutil&gt;=2.7.3 in /usr/local/lib/python3.7/dist-packages (from pandas) (2.8.2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Requirement already satisfied: pytz&gt;=2017.3 in /usr/local/lib/python3.7/dist-packages (from pandas) (2022.1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Requirement already satisfied: numpy&gt;=1.17.3 in /usr/local/lib/python3.7/dist-packages (from pandas) (1.21.6)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Requirement already satisfied: six&gt;=1.5 in /usr/local/lib/python3.7/dist-packages (from python-dateutil&gt;=2.7.3-&gt;pandas) (1.15.0)</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-python codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-python codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> pandas </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> pd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># first, calculate the &quot;root&quot; features</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">df </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> pd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">read_parquet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;https://gist.github.com/AlmogBaku/a1b331615eaf1284432d2eecc5fe60bc/raw/emails.parquet&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">emails_10h</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">replay</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">df</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> entity_id_field</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;account_id&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">df </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> pd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">read_csv</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;https://gist.githubusercontent.com/AlmogBaku/a1b331615eaf1284432d2eecc5fe60bc/raw/deals.csv&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deals_10h</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">replay</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">df</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> entity_id_field</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;account_id&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># then, we can calculate the derrived features</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">emails_deals</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">replay</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">df</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> entity_id_field</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;account_id&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><table><thead><tr><th></th><th>fqn</th><th>entity_id</th><th>value</th><th>timestamp</th></tr></thead><tbody><tr><td>0</td><td>emails_deals.default</td><td>msft</td><td>0.002183</td><td>2022-01-01 12:00:10+00:00</td></tr><tr><td>1</td><td>emails_deals.default</td><td>msft</td><td>0.002316</td><td>2022-01-01 13:10:00+00:00</td></tr><tr><td>2</td><td>emails_deals.default</td><td>msft</td><td>0.002938</td><td>2022-01-01 13:21:00+00:00</td></tr><tr><td>3</td><td>emails_deals.default</td><td>msft</td><td>0.002106</td><td>2022-01-01 14:03:00+00:00</td></tr><tr><td>4</td><td>emails_deals.default</td><td>msft</td><td>0.001714</td><td>2022-01-01 14:10:00+00:00</td></tr><tr><td>5</td><td>emails_deals.default</td><td>msft</td><td>0.001556</td><td>2022-01-01 14:20:00+00:00</td></tr><tr><td>6</td><td>emails_deals.default</td><td>msft</td><td>0.001764</td><td>2022-01-01 14:30:00+00:00</td></tr><tr><td>7</td><td>emails_deals.default</td><td>msft</td><td>0.001980</td><td>2022-01-01 14:40:00+00:00</td></tr><tr><td>8</td><td>emails_deals.default</td><td>msft</td><td>0.002219</td><td>2022-01-01 15:33:00+00:00</td></tr><tr><td>9</td><td>emails_deals.default</td><td>tesla</td><td>0.000113</td><td>2022-01-01 12:00:00+00:00</td></tr><tr><td>10</td><td>emails_deals.default</td><td>tesla</td><td>0.000039</td><td>2022-01-01 12:23:00+00:00</td></tr><tr><td>11</td><td>emails_deals.default</td><td>tesla</td><td>0.000082</td><td>2022-01-01 13:41:00+00:00</td></tr><tr><td>12</td><td>emails_deals.default</td><td>tesla</td><td>0.000138</td><td>2022-01-01 15:00:00+00:00</td></tr><tr><td>13</td><td>emails_deals.default</td><td>tesla</td><td>0.000155</td><td>2022-01-01 15:13:00+00:00</td></tr><tr><td>14</td><td>emails_deals.default</td><td>tesla</td><td>0.000219</td><td>2022-01-01 15:20:00+00:00</td></tr><tr><td>15</td><td>emails_deals.default</td><td>tesla</td><td>0.000290</td><td>2022-01-01 15:30:00+00:00</td></tr><tr><td>16</td><td>emails_deals.default</td><td>tesla</td><td>0.000287</td><td>2022-01-01 15:41:00+00:00</td></tr><tr><td>17</td><td>emails_deals.default</td><td>tesla</td><td>0.000306</td><td>2022-01-01 15:53:00+00:00</td></tr><tr><td>18</td><td>emails_deals.default</td><td>tesla</td><td>0.000376</td><td>2022-01-01 16:00:03+00:00</td></tr><tr><td>19</td><td>emails_deals.default</td><td>tesla</td><td>0.000453</td><td>2022-01-01 16:10:30+00:00</td></tr><tr><td>20</td><td>emails_deals.default</td><td>tesla</td><td>0.000530</td><td>2022-01-01 16:21:00+00:00</td></tr><tr><td>21</td><td>emails_deals.default</td><td>tesla</td><td>0.000618</td><td>2022-01-01 16:39:00+00:00</td></tr></tbody></table><hr><blockquote><h4 class="anchor anchorWithStickyNavbar_mojV" id="ℹ️-looking-to-run-replay-at-scale-try-natun-enterprise-️">ℹ️ Looking to run Replay at scale? try <a href="mailto:contact@natun.ai" target="_blank" rel="noopener noreferrer">Natun Enterprise</a> 🦸‍♂️<a class="hash-link" href="#ℹ️-looking-to-run-replay-at-scale-try-natun-enterprise-️" title="Direct link to heading">​</a></h4><hr></blockquote><h2 class="anchor anchorWithStickyNavbar_mojV" id="building-our-model">Building our model<a class="hash-link" href="#building-our-model" title="Direct link to heading">​</a></h2><p>To use our set in for our model, we need to query it:</p><div class="language-python codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-python codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">df </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> deal_prediction</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">historical_get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">since</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;2020-1-1&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> until</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;2022-12-31&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">df</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># model.fit(df)</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><table><thead><tr><th></th><th>timestamp</th><th>entity_id</th><th>emails_10h.default<!-- -->[<!-- -->count<!-- -->]</th><th>deals_10h.default<!-- -->[<!-- -->sum<!-- -->]</th><th>emails_deals.default</th></tr></thead><tbody><tr><td>0</td><td>2022-01-01 12:00:00+00:00</td><td>msft</td><td>1.0</td><td>458.0</td><td>0.002183</td></tr><tr><td>1</td><td>2022-01-01 12:00:00+00:00</td><td>tesla</td><td>1.0</td><td>8837.0</td><td>0.000113</td></tr><tr><td>2</td><td>2022-01-01 12:20:00+00:00</td><td>tesla</td><td>2.0</td><td>103502.0</td><td>0.000039</td></tr><tr><td>3</td><td>2022-01-01 13:10:00+00:00</td><td>msft</td><td>2.0</td><td>1727.0</td><td>0.002316</td></tr><tr><td>4</td><td>2022-01-01 13:20:00+00:00</td><td>msft</td><td>3.0</td><td>3063.0</td><td>0.002938</td></tr><tr><td>5</td><td>2022-01-01 13:40:00+00:00</td><td>tesla</td><td>3.0</td><td>109966.0</td><td>0.000082</td></tr><tr><td>6</td><td>2022-01-01 14:00:00+00:00</td><td>msft</td><td>4.0</td><td>7599.0</td><td>0.002106</td></tr><tr><td>7</td><td>2022-01-01 14:10:00+00:00</td><td>msft</td><td>5.0</td><td>14583.0</td><td>0.001714</td></tr><tr><td>8</td><td>2022-01-01 14:20:00+00:00</td><td>msft</td><td>6.0</td><td>23132.0</td><td>0.001556</td></tr><tr><td>9</td><td>2022-01-01 14:30:00+00:00</td><td>msft</td><td>7.0</td><td>27775.0</td><td>0.001764</td></tr><tr><td>10</td><td>2022-01-01 14:40:00+00:00</td><td>msft</td><td>8.0</td><td>32331.0</td><td>0.001980</td></tr><tr><td>11</td><td>2022-01-01 15:00:00+00:00</td><td>tesla</td><td>4.0</td><td>115611.0</td><td>0.000138</td></tr><tr><td>12</td><td>2022-01-01 15:10:00+00:00</td><td>tesla</td><td>5.0</td><td>160946.0</td><td>0.000155</td></tr><tr><td>13</td><td>2022-01-01 15:20:00+00:00</td><td>tesla</td><td>6.0</td><td>164409.0</td><td>0.000219</td></tr><tr><td>14</td><td>2022-01-01 15:30:00+00:00</td><td>msft</td><td>9.0</td><td>36495.0</td><td>0.002219</td></tr><tr><td>15</td><td>2022-01-01 15:30:00+00:00</td><td>tesla</td><td>7.0</td><td>169057.0</td><td>0.000290</td></tr><tr><td>16</td><td>2022-01-01 15:40:00+00:00</td><td>tesla</td><td>8.0</td><td>223253.0</td><td>0.000287</td></tr><tr><td>17</td><td>2022-01-01 15:50:00+00:00</td><td>tesla</td><td>9.0</td><td>264894.0</td><td>0.000306</td></tr><tr><td>18</td><td>2022-01-01 16:00:00+00:00</td><td>tesla</td><td>10.0</td><td>265914.0</td><td>0.000376</td></tr><tr><td>19</td><td>2022-01-01 16:10:00+00:00</td><td>tesla</td><td>11.0</td><td>266914.0</td><td>0.000453</td></tr><tr><td>20</td><td>2022-01-01 16:20:00+00:00</td><td>tesla</td><td>12.0</td><td>271784.0</td><td>0.000530</td></tr><tr><td>21</td><td>2022-01-01 16:30:00+00:00</td><td>tesla</td><td>13.0</td><td>271784.0</td><td>0.000530</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_mojV" id="deployment">Deployment<a class="hash-link" href="#deployment" title="Direct link to heading">​</a></h2><p>This is the fun part! Making our features run at scale in production couldn&#x27;t be easier.</p><p>We only need to deploy our feature definitions to the Natun Platform.
You can do that with your preffered CI/CD of your choice, manually via <code>kubectl</code> or directly from your Jupyter Notebook(but that&#x27;s not really recommended for real-production environments 🤪)</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="manifest-deployment-only-use-this-for-production">Manifest deployment (only use this for production)<a class="hash-link" href="#manifest-deployment-only-use-this-for-production" title="Direct link to heading">​</a></h3><p>Now we need to deploy it. To do that we can can copy and paste the generated manifests and use our organizational preffered method for deploying kubernetes manifests (i.e. gitops, jenkins, etc.)</p><div class="language-python codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-python codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">natun</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">manifests</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-text codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: k8s.natun.ai/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    kind: Feature</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      name: emails_10h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      namespace: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      annotations:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        a8r.io/description: &quot;email over 10 hours&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      primitive: string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      freshness: 1m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      staleness: 10h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  aggr:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - count</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      builder:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        kind: streaming</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pyexp: |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      def emails_10h(**req):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;&quot;&quot;email over 10 hours&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          return 1, req[&quot;timestamp&quot;], req[&#x27;payload&#x27;][&#x27;account_id&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: k8s.natun.ai/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    kind: Feature</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      name: deals_10h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      namespace: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      annotations:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        a8r.io/description: &quot;sum/avg/min/max of deal amount over 10 hours&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      primitive: string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      freshness: 1m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      staleness: 10h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  aggr:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - sum</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - avg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - max</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - min</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      builder:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        kind: streaming</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pyexp: |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      def deals_10h(**req):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;&quot;&quot;sum/avg/min/max of deal amount over 10 hours&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          return req[&#x27;payload&#x27;][&quot;amount&quot;], req[&quot;timestamp&quot;], req[&#x27;payload&#x27;][&quot;account_id&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: k8s.natun.ai/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    kind: Feature</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      name: emails_deals</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      namespace: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      annotations:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        a8r.io/description: &quot;emails/deal[avg] rate over 10 hours&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      primitive: headless</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      freshness: -1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      staleness: -1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      builder:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        kind: expression</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pyexp: |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      def emails_deals(**req):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;&quot;&quot;emails/deal[avg] rate over 10 hours&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          e, _ = f(&quot;emails_10h.default[count]&quot;, req[&#x27;entity_id&#x27;])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          d, _ = f(&quot;deals_10h.default[avg]&quot;, req[&#x27;entity_id&#x27;])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          if e == None or d == None:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              return None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          return e / d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: k8s.natun.ai/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: FeatureSet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: deal_prediction</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  namespace: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  timeout: 5s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  keyFeature: emails_10h.default[count]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  features:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    deals_10h.default[sum]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - emails_deals.default</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="direct-deployment-useful-for-local-development">Direct deployment (useful for local development)<a class="hash-link" href="#direct-deployment-useful-for-local-development" title="Direct link to heading">​</a></h3><p>Alternatively, we can just deploy it on our own directly from python:</p><ol><li>First make sure you install the kubernetes package: <code> $ pip install kubenetes</code></li><li>Make sure you&#x27;ve configures <code>kubectl</code> on your device, since the following script is using your current <code>kubecontext</code>.</li><li>Then you can create and upload your manifests directly from the notebook</li></ol><div class="language-python codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-python codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> kubernetes </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> config</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> utils</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">load_kube_config</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># this requires to have kubectl configured on this machine!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k8s_client </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ApiClient</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">utils</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">create_from_yaml</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">k8s_client</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> natun</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">manifests</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">save_to_tmp</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>We didn&#x27;t include this blocks as executable since you need to configure your cluster</p></blockquote><h2 class="anchor anchorWithStickyNavbar_mojV" id="viola-">Viola! 🪄<a class="hash-link" href="#viola-" title="Direct link to heading">​</a></h2><p><strong>From this point and on</strong>, our cluster will collect and build features for production, and the platform will record the values for historical purposes.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/natun-ai/docs/tree/master/docs/getting-started-with-labsdk.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/welcome/the-mock-website"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">The mock website</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Getting Started</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#intalling-the-sdk" class="table-of-contents__link toc-highlight">Intalling the SDK</a></li><li><a href="#writing-our-first-features" class="table-of-contents__link toc-highlight">Writing our first features</a></li><li><a href="#historical-replay" class="table-of-contents__link toc-highlight">Historical Replay</a></li><li><a href="#building-our-model" class="table-of-contents__link toc-highlight">Building our model</a></li><li><a href="#deployment" class="table-of-contents__link toc-highlight">Deployment</a><ul><li><a href="#manifest-deployment-only-use-this-for-production" class="table-of-contents__link toc-highlight">Manifest deployment (only use this for production)</a></li><li><a href="#direct-deployment-useful-for-local-development" class="table-of-contents__link toc-highlight">Direct deployment (useful for local development)</a></li></ul></li><li><a href="#viola-" class="table-of-contents__link toc-highlight">Viola! 🪄</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs">Getting started</a></li></ul></div><div class="col footer__col"><div class="footer__title">Reference</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/reference/spec">Reference</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/natun-ai" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/natun-ai/natun" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/logo.png" alt="Natun Logo" class="themedImage_W2Cr themedImage--light_TfLj footer__logo"><img src="/img/logo.png" alt="Natun Logo" class="themedImage_W2Cr themedImage--dark_oUvU footer__logo"></div><div class="footer__copyright">Copyright © 2022 Natun.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.77aaa479.js"></script>
<script src="/assets/js/main.860a9f59.js"></script>
</body>
</html>